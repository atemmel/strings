#!/bin/cherry

import fs

assert (fs'has-program g++)
assert (fs'has-program poop)
assert (fs'has-program mkdir)

mkdir -p build/

cpp-files := *.cpp

for cpp-file in $cpp-files {
    prog-name := (slice $cpp-file 0 (- (len $cpp-file) 4))

    g++ -Ofast -o "build/{prog-name}" $cpp-file
    #g++ -o "build/{prog-name}" $cpp-file
}

#TODO: "uppackning" hade gått hårt här
#poop ...$arg-strs

poop "./build/linear corpus-1 afternoon" "./build/boyer-moore corpus-1 afternoon"
