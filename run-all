#!/bin/cherry

import fs

assert (fs'has-program g++)
assert (fs'has-program poop)

cpp-files := *.cpp
arg-strs  := []

for cpp-file in $cpp-files {
    prog-name := (slice $cpp-file 0 (- (len $cpp-file) 4))

    #TODO: boyer-moore dör med -Ofast, säkert undefined behaviour någonstants
    #g++ -Ofast -o $prog-name $cpp-file
    g++ -o $prog-name $cpp-file
}

#TODO: "uppackning" hade gått hårt här
#poop ...$arg-strs

poop "./linear corpus-1 afternoon" "./boyer-moore corpus-1 afternoon"
